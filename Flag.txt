;Assembly Language program to display flag register of 8086 on standard output

DATA SEGMENT
    MSG DB 0DH, 0AH, "--- -- -- OF DF IF TF SF ZF -- AF -- PF -- CF $"
    NEWL DB 0DH, 0AH, "$"
    FLAG DW ?
DATA ENDS

CODE SEGMENT
    ASSUME CS: CODE, DS: DATA

START:
    MOV AX, DATA
    MOV DS, AX

    MOV DX, OFFSET MSG
    MOV AH, 09H
    INT 21H
    LEA DX, NEWL
    MOV AH, 09H
    INT 21H
    CLI
    STC
    STD
    PUSHF
    POP BX
    MOV FLAG, BX
    MOV CX, 16
    MOV BX, 8000H

REPEAT:
    MOV AX, FLAG
    AND AX, BX
    JZ DIS_0
    MOV DL, '1'
    JMP NEXT
DIS_0:
    MOV DL, '0'
NEXT:
    MOV AH, 02H
    INT 21H
    MOV DL, ' '
    MOV AH, 02H
    INT 21H     ; CALL INT 21H INTERRUPT TWO
    INT 21H     ; TIMES TO PRINT SPACE TWICE.
    ROR BX, 1
    LOOP REPEAT

    MOV AH, 4CH
    INT 21H
CODE ENDS
END START