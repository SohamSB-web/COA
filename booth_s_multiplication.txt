.model tiny
.code
org 100h

start:
jmp logic

; --- Data Area ---
Q DB 8H
M DB 5H
RESULT DW ?

; --- Code Area ---
logic:
    MOV AX, 0000H
    MOV DX, 0000H
    MOV AL, Q
    MOV BL, M
    MOV CL, 8
    CLC                 
    
BACK:        
    MOV DX, AX          
    RCL DX, 01          
    AND DX, 03H         

    CMP DX, 01H         
    JE Q01
    CMP DX, 02H         
    JE Q10

NEXT:
    SAR AX, 01          
    LOOP BACK
    JMP EXIT

Q10:
    SUB AH, BL          
    JMP NEXT
Q01:
    ADD AH, BL          
    JMP NEXT

EXIT:
    MOV RESULT, AX
    
    MOV AH, 4CH
    INT 21H

end start